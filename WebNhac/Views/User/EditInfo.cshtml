@model WebNhac.ViewModels.UserViewModel
<hr />
<br />
<section style="background-color: lightskyblue;">
    <div class="panel panel-primary">
        <div class="row">
            <div class="row">
                <br />
                <lable style="color:black;font-size:larger;font-family:Arial">Chỉnh sửa Thông tin người dùng</lable>
                <div class="col-lg-4">
                    <div class="card mb-4">
                        <br />
                        <div class="card-body text-center">
                            
                            <h5 class="my-3"> </h5>
                        </div>
                    </div>
                    <div class="card mb-4 mb-lg-0">
                        <div class="card-body p-0">
                        </div>
                    </div>
                </div>
                <form asp-action="EditInfo" asp-controller="User" method="POST">
                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-body">
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Username</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" asp-for="Register.Username"
                                               readonly />
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Name</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control" asp-for="Register.Name"
                                               placeholder="Nhập tên" autofocus required />
                                        <span asp-validation-for="Register.Name" class="text-danger"></span>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Email</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control" asp-for="Register.Email"
                                               placeholder="Nhập email" autofocus required />
                                        <span asp-validation-for="Register.Email" class="text-danger"></span>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Phone</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control" asp-for="Register.Phone"
                                               placeholder="Nhập Số điện thoại" autofocus required />
                                        <span asp-validation-for="Register.Phone" class="text-danger"></span>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Password</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="oldpassword"
                                               placeholder="Nhập tên mật khẩu cũ" autofocus required 
                                               oninput="checkOldPassword(this);" />
                                        <span asp-validation-for="Register.Password" class="text-danger"></span>
                                    </div>
                                </div>
                                <hr >
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">New password</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="password" class="form-control" asp-for="Register.Password" id="password" placeholder="Nhập mật khẩu mới" required
                                               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                               title="Mật khẩu phải có ít nhất 8 ký tự, bao gồm ít nhất một chữ số, một chữ thường và một chữ hoa." />
                                        <span asp-validation-for="Register.Password" class="text-danger"></span>
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Confirm new password</p>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="password" class="form-control" id="confirmPassword"
                                               placeholder="Nhập lại mật khẩu mới" required
                                               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                               title="Mật khẩu phải có ít nhất 8 ký tự, bao gồm ít nhất một chữ số, một chữ thường và một chữ hoa."
                                               oninput="checkPasswordMatch(this);" />
                                    </div>
                                </div>
                                <hr />
                                <div class="d-flex justify-content-center mb-2">
                                    <button type="submit" href="" class="btn btn-primary">Lưu</button>
                                    <a href="thong-tin" class="btn btn-outline-secondary ms-1">Quay lại</a>
                                </div>
                                <br />
                            </div>
                        </div>

                    </div>
                </form>

            </div>
        </div>


    </div>
</section>
<script>
    function checkPasswordMatch() {
        var password = document.getElementById('password')
        var confirm = document.getElementById('confirmPassword')
        if (password.value === confirm.value) {
            confirmPassword.setCustomValidity('');
        } else {
            confirmPassword.setCustomValidity('Mật khẩu không khớp');
        }
    }
    function checkOldPassword() {
        var password = document.getElementById('oldpassword')
        var confirm = @Model.Register.Password
        if (password.value === confirm.value) {
            oldpassword.setCustomValidity('');
        }
        else {
            oldpassword.setCustomValidity('Mật khẩu cũ không đúng');
        }
    }
</script>
